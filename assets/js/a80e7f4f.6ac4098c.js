"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["151513"],{765128:function(e,n,a){a.r(n),a.d(n,{metadata:()=>i,contentTitle:()=>o,default:()=>h,assets:()=>l,toc:()=>c,frontMatter:()=>r});var i=JSON.parse('{"id":"gettingStarted/what-is-apache-doris","title":"Introduction to Apache Doris","description":"\x3c!--","source":"@site/versioned_docs/version-2.1/gettingStarted/what-is-apache-doris.md","sourceDirName":"gettingStarted","slug":"/gettingStarted/what-is-apache-doris","permalink":"/docs/gettingStarted/what-is-apache-doris","draft":false,"unlisted":false,"tags":[],"version":"2.1","frontMatter":{"title":"Introduction to Apache Doris","language":"en"},"sidebar":"docs","previous":{"title":"What\'s New","permalink":"/docs/gettingStarted/what-is-new"},"next":{"title":"Quick Start","permalink":"/docs/gettingStarted/quick-start"}}'),s=a("785893"),t=a("250065");let r={title:"Introduction to Apache Doris",language:"en"},o=void 0,l={},c=[{value:"What&#39;s Apache Doris",id:"whats-apache-doris",level:2},{value:"Usage Scenarios",id:"usage-scenarios",level:2},{value:"Technical overview",id:"technical-overview",level:2},{value:"Core Features of Apache Doris",id:"core-features-of-apache-doris",level:2},{value:"Technical overview",id:"technical-overview-1",level:2},{value:"Interface",id:"interface",level:3},{value:"Storage engine",id:"storage-engine",level:3},{value:"Query engine",id:"query-engine",level:3}];function d(e){let n={h2:"h2",h3:"h3",img:"img",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"whats-apache-doris",children:"What's Apache Doris"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris is an MPP-based real-time data warehouse known for its high query speed. For queries on large datasets, it returns results in sub-seconds. It supports both high-concurrent point queries and high-throughput complex analysis. It can be used for report analysis, ad-hoc queries, unified data warehouse, and data lake query acceleration. Based on Apache Doris, users can build applications for user behavior analysis, A/B testing platform, log analysis, user profile analysis, and e-commerce order analysis."}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris, formerly known as Palo, was initially created to support Baidu's ad reporting business. It was officially open-sourced in 2017 and donated by Baidu to the Apache Software Foundation in July 2018, where it was operated by members of the incubator project management committee under the guidance of Apache mentors. In June 2022, Apache Doris graduated from the Apache incubator as a Top-Level Project. By 2024, the Apache Doris community has gathered more than 600 contributors from hundreds of companies in different industries, with over 120 monthly active contributors."}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris has a wide user base. It has been used in production environments of over 4000 companies worldwide, including giants such as TikTok, Baidu, Cisco, Tencent, and NetEase. It is also widely used across industries from finance, retailing, and telecommunications to energy, manufacturing, medical care, etc."}),"\n",(0,s.jsx)(n.h2,{id:"usage-scenarios",children:"Usage Scenarios"}),"\n",(0,s.jsx)(n.p,{children:"As shown in the figure below, after various data integrations and processing, data sources are typically ingested into the real-time data warehouse Doris and offline lakehouses (such as Hive, Iceberg, and Hudi). These are widely used in OLAP analysis scenarios."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Apache Doris usage scenarios",src:a(658855).Z+"",width:"2560",height:"1496"})}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris is widely used in the following scenarios:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Reporting Services and Ad-Hoc Queries: Doris provides multidimensional data analysis capabilities, supporting internal enterprise reports and ad-hoc report queries. It offers stable and high-performance service support for high-concurrency report access by users."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Real-Time Data Warehouse Analysis: Doris can be applied to real-time data processing and analysis scenarios, providing second-level synchronization of data changes from TP databases and sub-second data query capabilities. It serves scenarios such as real-time dashboards, real-time risk control, real-time order analysis, and real-time advertiser reports."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Unified Lakehouse Analysis: Doris\u2019s external table federated analysis accesses data stored in offline lakehouses like Hive, Iceberg, and Hudi. This approach significantly enhances query performance without the need for data duplication."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"User Profiling and Behavior Analysis: Utilizing Doris\u2019s built-in behavior analysis functions and bitmap types supports user behavior analysis and profiling scenarios. It provides efficient query and real-time analysis capabilities, helping enterprises quickly gain user insights, optimize user experiences, and make informed business decisions."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Log Search and Analysis: Doris supports inverted indexing and full-text search, effectively meeting log search and analysis requirements. Leveraging its efficient query and storage engines, Doris offers a cost-performance advantage of up to tenfold compared to traditional log search and analysis solutions."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"technical-overview",children:"Technical overview"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris adopts the MySQL protocol and is highly compatible with MySQL syntax, supporting standard SQL. Users can access Apache Doris through various client tools and seamlessly integrate it with BI tools."}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris has a simple and neat architecture with only two types of processes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Frontend(FE): Mainly responsible for handling user request access, query parsing and planning, metadata management, and node management-related tasks."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Backend(BE): Mainly responsible for data storage and the execution of query plans. Data is partitioned into shards and stored with multiple replicas in the BE."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Overall Architecture and Technical Features",src:a(248937).Z+"",width:"2560",height:"1224"})}),"\n",(0,s.jsx)(n.p,{children:"In a production environment, multiple FE nodes can be deployed for disaster recovery and backup, with each FE maintaining a full copy of the metadata. The FE has three roles:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Role"}),(0,s.jsx)(n.th,{children:"Function"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Master"}),(0,s.jsx)(n.td,{children:"The FE Master node is responsible for reading and writing metadata. When the Master metadata undergoes changes, it synchronizes these changes to Follower or Observer nodes using the BDB JE protocol."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Follower"}),(0,s.jsx)(n.td,{children:"Follower nodes are responsible for reading metadata. In the event of a Master node failure, a Follower node can be selected as the new Master node."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Observer"}),(0,s.jsx)(n.td,{children:"Observer nodes are responsible for reading metadata, primarily to enhance the cluster's query concurrency and performance. They do not participate in the cluster's leader election."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Both FE and BE processes are horizontally scalable, allowing a single cluster to support hundreds of machines and tens of petabytes of storage capacity. FE and BE processes ensure high availability and data reliability through consistency protocols. The compute-storage integrated architecture is highly consolidated, significantly reducing the operational costs of distributed systems."}),"\n",(0,s.jsx)(n.h2,{id:"core-features-of-apache-doris",children:"Core Features of Apache Doris"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"High Availability: In Apache Doris, both metadata and data are stored with multiple replicas, synchronizing data logs via the quorum protocol. Data write is considered successful once a majority of replicas have completed the write, ensuring that the cluster remains available even if a few nodes fail. Apache Doris supports both same-city and cross-region disaster recovery, enabling dual-cluster master-slave modes. When some nodes experience failures, the cluster can automatically isolate the faulty nodes, preventing the overall cluster availability from being affected."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"High Compatibility: Apache Doris is highly compatible with the MySQL protocol and supports standard SQL syntax, covering most MySQL and Hive functions. This high compatibility allows users to seamlessly migrate and integrate existing applications and tools. Apache Doris supports the MySQL ecosystem, enabling users to connect Doris using MySQL Client tools for more convenient operations and maintenance. It also supports MySQL protocol compatibility for BI reporting tools and data transmission tools, ensuring efficiency and stability in data analysis and data transmission processes."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Real-Time Data Warehouse: Based on Apache Doris, a real-time data warehouse service can be built. Apache Doris offers second-level data ingestion capabilities, capturing incremental changes from upstream online transactional databases into Doris within seconds. Leveraging vectorized engines, MPP architecture, and Pipeline execution engines, Doris provides sub-second data query capabilities, thereby constructing a high-performance, low-latency real-time data warehouse platform."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Unified Lakehouse: Apache Doris can build a unified lakehouse architecture based on external data sources such as data lakes or relational databases. The Doris unified lakehouse solution enables seamless integration and free data flow between data lakes and data warehouses, helping users directly utilize data warehouse capabilities to solve data analysis problems in data lakes while fully leveraging data lake data management capabilities to enhance data value."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Flexible Modeling: Apache Doris offers various modeling approaches, such as wide table models, pre-aggregation models, star/snowflake schemas, etc. During data import, data can be flattened into wide tables and written into Doris through compute engines like Flink or Spark, or data can be directly imported into Doris, performing data modeling operations through views, materialized views, or real-time multi-table joins."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"technical-overview-1",children:"Technical overview"}),"\n",(0,s.jsx)(n.p,{children:"Doris provides an efficient SQL interface and is fully compatible with the MySQL protocol. Its query engine is based on an MPP (Massively Parallel Processing) architecture, capable of efficiently executing complex analytical queries and achieving low-latency real-time queries. Through columnar storage technology for data encoding and compression, it significantly optimizes query performance and storage compression ratio."}),"\n",(0,s.jsx)(n.h3,{id:"interface",children:"Interface"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris adopts the MySQL protocol, supports standard SQL, and is highly compatible with MySQL syntax. Users can access Apache Doris through various client tools and seamlessly integrate it with BI tools, including but not limited to Smartbi, DataEase, FineBI, Tableau, Power BI, and Apache Superset. Apache Doris can work as the data source for any BI tools that support the MySQL protocol."}),"\n",(0,s.jsx)(n.h3,{id:"storage-engine",children:"Storage engine"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris has a columnar storage engine, which encodes, compresses, and reads data by column. This enables a very high data compression ratio and largely reduces unnecessary data scanning, thus making more efficient use of IO and CPU resources."}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris supports various index structures to minimize data scans:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Sorted Compound Key Index: Users can specify three columns at most to form a compound sort key. This can effectively prune data to better support highly concurrent reporting scenarios."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Min/Max Index: This enables effective data filtering in equivalence and range queries of numeric types."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"BloomFilter Index: This is very effective in equivalence filtering and pruning of high-cardinality columns."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Inverted Index: This enables fast searching for any field."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Apache Doris supports a variety of data models and has optimized them for different scenarios:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Aggregate Key Model: merges the value columns with the same keys and improves performance by pre-aggregation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Unique Key Model: ensures uniqueness of keys and overwrites data with the same key to achieve row-level data updates"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Duplicate Key Model: stores data as it is without aggregation, capable of detailed storage of fact tables"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Apache Doris also supports strongly consistent materialized views. Materialized views are automatically selected and updated within the system without manual efforts, which reduces maintenance costs for users."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"query-engine",children:"Query engine"}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris has an MPP-based query engine for parallel execution between and within nodes. It supports distributed shuffle join for large tables to better handle complicated queries."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Query engine 1",src:a(328971).Z+"",width:"2560",height:"1492"})}),"\n",(0,s.jsx)(n.p,{children:"The query engine of Apache Doris is fully vectorized, with all memory structures laid out in a columnar format. This can largely reduce virtual function calls, increase cache hit rates, and make efficient use of SIMD instructions. Apache Doris delivers a 5~10 times higher performance in wide table aggregation scenarios than non-vectorized engines."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Query engine 2",src:a(296785).Z+"",width:"2560",height:"864"})}),"\n",(0,s.jsx)(n.p,{children:"Apache Doris uses adaptive query execution technology to dynamically adjust the execution plan based on runtime statistics. For example, it can generate a runtime filter and push it to the probe side. Specifically, it pushes the filters to the lowest-level scan node on the probe side, which largely reduces the data amount to be processed and increases join performance. The runtime filter of Apache Doris supports In/Min/Max/Bloom Filter."}),"\n",(0,s.jsx)(n.p,{children:"The query optimizer of Apache Doris is a combination of CBO and RBO. RBO supports constant folding, subquery rewriting, and predicate pushdown while CBO supports join reorder. The Apache Doris CBO is under continuous optimization for more accurate statistics collection and inference as well as a more accurate cost model."})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},328971:function(e,n,a){a.d(n,{Z:function(){return i}});let i=a.p+"assets/images/apache-doris-query-engine-1-9e2beb07704b905a1c44dae1c5b3bd04.png"},296785:function(e,n,a){a.d(n,{Z:function(){return i}});let i=a.p+"assets/images/apache-doris-query-engine-2-92a7d1bd709c09e437e90dfedf559803.png"},248937:function(e,n,a){a.d(n,{Z:function(){return i}});let i=a.p+"assets/images/apache-doris-technical-overview-b8c5cb11b57d2f6559fa397d9fd0a8a0.png"},658855:function(e,n,a){a.d(n,{Z:function(){return i}});let i=a.p+"assets/images/apache-doris-usage-scenarios-pipeline-a492c2b680f32df2aac535b91cb0e485.png"},250065:function(e,n,a){a.d(n,{Z:function(){return o},a:function(){return r}});var i=a(667294);let s={},t=i.createContext(s);function r(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);