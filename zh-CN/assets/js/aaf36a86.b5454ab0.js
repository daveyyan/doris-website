"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["492599"],{327059:function(e,n,t){t.r(n),t.d(n,{metadata:()=>a,contentTitle:()=>o,default:()=>d,assets:()=>l,toc:()=>c,frontMatter:()=>i});var a=JSON.parse('{"id":"data-operate/import/complex-types/bitmap","title":"Bitmap","description":"\x3c!--","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/data-operate/import/complex-types/bitmap.md","sourceDirName":"data-operate/import/complex-types","slug":"/data-operate/import/complex-types/bitmap","permalink":"/zh-CN/docs/dev/data-operate/import/complex-types/bitmap","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Bitmap","language":"zh-CN"}}'),r=t("785893"),s=t("250065");let i={title:"Bitmap",language:"zh-CN"},o=void 0,l={},c=[{value:"\u4F7F\u7528\u793A\u4F8B",id:"\u4F7F\u7528\u793A\u4F8B",level:2},{value:"\u7B2C 1 \u6B65\uFF1A\u51C6\u5907\u6570\u636E",id:"\u7B2C-1-\u6B65\u51C6\u5907\u6570\u636E",level:3},{value:"\u7B2C 2 \u6B65\uFF1A\u5728\u5E93\u4E2D\u521B\u5EFA\u8868",id:"\u7B2C-2-\u6B65\u5728\u5E93\u4E2D\u521B\u5EFA\u8868",level:3},{value:"\u7B2C 3 \u6B65\uFF1A\u5BFC\u5165\u6570\u636E",id:"\u7B2C-3-\u6B65\u5BFC\u5165\u6570\u636E",level:3},{value:"\u7B2C 4 \u6B65\uFF1A\u68C0\u67E5\u5BFC\u5165\u6570\u636E",id:"\u7B2C-4-\u6B65\u68C0\u67E5\u5BFC\u5165\u6570\u636E",level:3}];function p(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["BITMAP \u7C7B\u578B\u53EF\u4EE5\u5728 Duplicate \u8868\u3001Unique \u8868\u3001Aggregate \u8868\u4E2D\u4F7F\u7528\uFF0C\u53EA\u80FD\u4F5C\u4E3A Key \u7C7B\uFF0C\u65E0\u6CD5\u4F5C\u4E3A Value \u5217\u4F7F\u7528\u3002\u5728 Aggregate \u8868\u4E2D\u4F7F\u7528 BITMAP \u7C7B\u578B\uFF0C\u5176\u5EFA\u8868\u65F6\u5FC5\u987B\u4F7F\u7528\u805A\u5408\u7C7B\u578B BITMAP_UNION\u3002\u7528\u6237\u4E0D\u9700\u8981\u6307\u5B9A\u957F\u5EA6\u548C\u9ED8\u8BA4\u503C\u3002\u957F\u5EA6\u6839\u636E\u6570\u636E\u7684\u805A\u5408\u7A0B\u5EA6\u7CFB\u7EDF\u5185\u63A7\u5236\u3002\u66F4\u591A\u6587\u6863\u53C2\u8003",(0,r.jsx)(n.a,{href:"/zh-CN/docs/dev/sql-manual/sql-data-types/aggregate/BITMAP",children:"Bitmap"}),"\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4F7F\u7528\u793A\u4F8B",children:"\u4F7F\u7528\u793A\u4F8B"}),"\n",(0,r.jsx)(n.h3,{id:"\u7B2C-1-\u6B65\u51C6\u5907\u6570\u636E",children:"\u7B2C 1 \u6B65\uFF1A\u51C6\u5907\u6570\u636E"}),"\n",(0,r.jsx)(n.p,{children:"\u521B\u5EFA\u5982\u4E0B\u7684 csv \u6587\u4EF6\uFF1Atest_bitmap.csv"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"1|koga|17723\n2|nijg|146285\n3|lojn|347890\n4|lofn|489871\n5|jfin|545679\n6|kon|676724\n7|nhga|767689\n8|nfubg|879878\n9|huang|969798\n10|buag|97997\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7B2C-2-\u6B65\u5728\u5E93\u4E2D\u521B\u5EFA\u8868",children:"\u7B2C 2 \u6B65\uFF1A\u5728\u5E93\u4E2D\u521B\u5EFA\u8868"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'CREATE TABLE testdb.test_bitmap(\n    typ_id     BIGINT                NULL   COMMENT "ID",\n    hou        VARCHAR(10)           NULL   COMMENT "one",\n    arr        BITMAP  BITMAP_UNION  NOT NULL   COMMENT "two"\n)\nAGGREGATE KEY(typ_id,hou)\nDISTRIBUTED BY HASH(typ_id,hou) BUCKETS 10;\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7B2C-3-\u6B65\u5BFC\u5165\u6570\u636E",children:"\u7B2C 3 \u6B65\uFF1A\u5BFC\u5165\u6570\u636E"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'curl --location-trusted -u <doris_user>:<doris_password> \\\n    -H "column_separator:|" \\\n    -H "columns:typ_id,hou,arr,arr=to_bitmap(arr)" \\\n    -T test_bitmap.csv \\\n    -XPUT http://<fe_ip>:<fe_http_port>/api/testdb/test_bitmap/_stream_load\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7B2C-4-\u6B65\u68C0\u67E5\u5BFC\u5165\u6570\u636E",children:"\u7B2C 4 \u6B65\uFF1A\u68C0\u67E5\u5BFC\u5165\u6570\u636E"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"mysql> select typ_id,hou,bitmap_to_string(arr) from testdb.test_bitmap;\n+--------+-------+-----------------------+\n| typ_id | hou   | bitmap_to_string(arr) |\n+--------+-------+-----------------------+\n|      4 | lofn  | 489871                |\n|      6 | kon   | 676724                |\n|      9 | huang | 969798                |\n|      3 | lojn  | 347890                |\n|      8 | nfubg | 879878                |\n|      7 | nhga  | 767689                |\n|      1 | koga  | 17723                 |\n|      2 | nijg  | 146285                |\n|      5 | jfin  | 545679                |\n|     10 | buag  | 97997                 |\n+--------+-------+-----------------------+\n10 rows in set (0.07 sec)\n"})})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return i}});var a=t(667294);let r={},s=a.createContext(r);function i(e){let n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);